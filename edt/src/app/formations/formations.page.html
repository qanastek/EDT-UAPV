<ion-header>
  <ion-toolbar>
    <ion-segment>

      <ion-segment-button value="tout" checked (click)="this.tab = 0">
        <p style="text-transform: uppercase;">
          TOUT
        </p>
      </ion-segment-button>

      <ion-segment-button value="favoris" (click)="this.tab = 1">
        <p style="text-transform: uppercase;">
          Favoris
        </p>
      </ion-segment-button>

    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content class="align-items-center" fullscreen>
      
    <div [hidden]="this.tab !== 0">
      <ion-searchbar
      debounce="500"
      placeholder="Entrée votre diplôme / filière"
      autocomplete="on"
      clearIcon="close"
      color="search"
      inputmode="text"
      searchIcon="ios-funnel"
      [(ngModel)]="this.searchCurrent" 
      ></ion-searchbar>
  
      <div *ngIf="!this.API.promos" style="text-align: center;">
        <ion-icon name="ios-information-circle-outline" class="information"></ion-icon>
        <p style="color: rgba(229, 229, 234); font-size: 2em;">
          Chargement...
        </p>
      </div>
    
      <!-- La partie des promotions -->
      <div *ngIf="this.API.promos">
  
        <ion-list>
    
          <div *ngFor="let section of this.API.promos">
            <div *ngFor="let diplome of section.names">
        
                <div *ngIf="this.searchCurrent.length <= 0">
                  <ion-item (click)="this.API.getGroupsAndEdt(diplome.code); this.searchCurrent = '';">
                    <ion-label>
          
                      <p>
                        {{diplome.name}}
                      </p>
          
                    </ion-label>
                  </ion-item>
                </div>
          
                <div *ngIf="this.searchCurrent.length > 0">
    
                  <!-- Si le nom de l'UE contient l'input -->
                  <ion-item
                    *ngIf="diplome.name.toLowerCase().includes(this.searchCurrent.toLowerCase())"
                    (click)="this.goToGroups(diplome.code)"
                  >
                    <ion-label>
          
                      <p>
                        {{diplome.name}}
                      </p>
          
                    </ion-label>
                  </ion-item>
    
                </div>
                
            </div>
          </div>
    
        </ion-list>
      </div>
    </div>

    <div [hidden]="this.tab !== 1">

      <ion-list>   
        <!-- Multi-line sliding item with icon options on both sides -->
        <ion-item-sliding id="item100">
          <ion-item *ngFor="let favoris of testFavoris" (click)="loadEdt(favoris.url)">

            <ion-label text-wrap>
              
              <h2>
                Diplôme:
                <span style="text-transform: uppercase; font-style: italic;">
                  {{favoris.diplome}}
                </span>
              </h2>

              <ion-chip *ngFor="let chip of favoris.chips" color="primary">
                <ion-label style="text-transform: uppercase; font-size: 0.8em;">
                  {{chip}}
                </ion-label>
              </ion-chip>

            </ion-label>

          </ion-item>
      
          <ion-item-options side="start">
              <ion-item-option color="danger">
                <ion-icon slot="icon-only" name="trash"></ion-icon>
              </ion-item-option>
          </ion-item-options>

        </ion-item-sliding>
      </ion-list>

    </div>
  
  </ion-content>